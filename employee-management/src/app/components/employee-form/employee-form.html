

<mat-card class="login-card">
  <form [formGroup]="form" (ngSubmit)="save()">
    <mat-card-header>
      <h2>Employee Form</h2>
    </mat-card-header>

    <!-- Name -->
    <mat-form-field class="full">
      <mat-label>Name</mat-label>
      <input matInput formControlName="name" />
      @if (form.get('name')?.hasError('required') && form.get('name')?.touched) {
        <mat-error>Name is required</mat-error>
      }
    </mat-form-field>

    <!-- Email -->
    <mat-form-field class="full">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" />
      @if (form.get('email')?.hasError('required') && form.get('email')?.touched) {
        <mat-error>Email is required</mat-error>
      }
      @if (form.get('email')?.hasError('email') && form.get('email')?.touched) {
        <mat-error>Invalid email format</mat-error>
      }
    </mat-form-field>

    <!-- Age -->
    <mat-form-field class="full">
      <mat-label>Age</mat-label>
      <input matInput type="number" formControlName="age" />
      @if (form.get('age')?.hasError('required') && form.get('age')?.touched) {
        <mat-error>Age is required</mat-error>
      }
      @if (form.get('age')?.hasError('min') && form.get('age')?.touched) {
        <mat-error>Age must be greater than 18</mat-error>
      }
    </mat-form-field>

    <!-- Department -->
    <mat-form-field class="full">
      <mat-label>Department</mat-label>
      <mat-select formControlName="department">
        <mat-option value="Angular">Angular</mat-option>
        <mat-option value="React">React</mat-option>
        <mat-option value="Node">Node</mat-option>
      </mat-select>
      @if (form.get('department')?.hasError('required') && form.get('department')?.touched) {
        <mat-error>Department is required</mat-error>
      }
    </mat-form-field>

    <!-- Skills -->
    <div formArrayName="skills">
      <h3>Skills</h3>
      @for (s of skills.controls; track $index) {
        <div class="skill-row">
          <mat-form-field class="skill-field">
            <!-- âœ… Correct formControlName binding -->
            <input matInput [formControlName]="$index" placeholder="Skill" />
            @if (s.hasError('required') && s.touched) {
              <mat-error>Skill name required</mat-error>
            }
          </mat-form-field>

          <button
            mat-icon-button
            color="warn"
            type="button"
            (click)="removeSkill($index)"
            aria-label="remove"
          >
            <mat-icon>remove_circle</mat-icon>
          </button>
        </div>
      }

      <button mat-button type="button" (click)="addSkill()">Add Skill</button>
    </div>

    <!-- Actions -->
    <div class="actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
        Save
      </button>
      <button mat-button type="button" (click)="reset()">Reset</button>
    </div>
  </form>
</mat-card>



